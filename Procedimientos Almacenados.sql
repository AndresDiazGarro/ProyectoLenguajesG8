CREATE OR REPLACE PROCEDURE LOGIN (REGISTROS OUT SYS_REFCURSOR)
AS
BEGIN
    OPEN REGISTROS FOR SELECT NOM_USUARIO, CONTRASENA FROM USUARIOS;
END;

CREATE OR REPLACE PROCEDURE CREAR_USUARIO(nom IN VARCHAR2, apell IN VARCHAR2, 
usua IN VARCHAR2, cont IN VARCHAR2)
AS
BEGIN
 INSERT INTO USUARIOS (nombre, apellido, Nom_usuario, contrasena)
 VALUES (nom, apell, usua, cont);
END;

CREATE OR REPLACE PROCEDURE VERIFICAR_USUARIO(usua IN VARCHAR2, cont IN VARCHAR2)
AS
 V_USUARIO USUARIOS.NOM_USUARIO%TYPE;
 V_CONTRASENA USUARIOS.CONTRASENA%TYPE;
BEGIN
 SELECT CONTRASENA INTO V_CONTRASENA FROM USUARIOS
 WHERE NOM_USUARIO = usua AND CONTRASENA = cont;
END;


CREATE OR REPLACE PROCEDURE MOSTRAR_DATOS_USUARIO(usua_act IN VARCHAR, nom OUT VARCHAR2,
apell OUT VARCHAR2, usua OUT VARCHAR2, cont OUT VARCHAR2)
AS
BEGIN
 SELECT NOMBRE INTO nom FROM USUARIOS
 WHERE NOM_USUARIO = usua_act;
 SELECT APELLIDO INTO apell FROM USUARIOS
 WHERE NOM_USUARIO = usua_act;
 SELECT NOM_USUARIO INTO usua FROM USUARIOS
 WHERE NOM_USUARIO = usua_act;
 SELECT Contrasena INTO cont FROM USUARIOS
 WHERE NOM_USUARIO = usua_act;
END;



-----------------------PROCEDIMIENTO ALMACENADO DE BICICLETAS CONSULTA---------------------

CREATE OR REPLACE PROCEDURE seleccionarBicicletas(bicis out sys_refcursor)
AS

 BEGIN
  OPEN bicis FOR SELECT ID_BICICLETA, NOMBRE, PRECIO, NOMBRE_FRENOS, NOMBRE_TRANSMISION, NOMBRE_SUSP, NOMBRE_RUEDAS, NOMBRE_MARCO, Nombre_MARCA
 FROM BICICLETAS INNER JOIN FRENOS ON
  bicicletas.ID_FRENOS = frenos.ID_FRENOS
   INNER JOIN TRANSMISION ON
    bicicletas.ID_TRANSMISION = transmision.ID_TRANSMISION
     INNER JOIN SUSPENSION ON
      bicicletas.ID_SUSPENSION = SUSPENSION.ID_SUSPENSION
       INNER JOIN RUEDAS ON
        bicicletas.ID_RUEDAS = RUEDAS.ID_RUEDAS
         INNER JOIN MARCO ON 
          bicicletas.ID_MARCO = MARCO.ID_MARCO
           INNER JOIN MARCA ON
            bicicletas.ID_MARCA = MARCA.ID_MARCA;
END;